{% extends 'base.html' %}
{% block content %}
<div class='d-flex justify-content-center mt-3'>
    <img class='rounded-pill' style="width: 150px; height: 150px;" src="{{ user.profile.image.url }}" alt="{{ user.profile.image }}">
</div>
<div class='text-center'>
    <h3 class="text-center p-2">{{ user }}</h3>
    <p class="text-center">{{ user.profile.status }}</p>
    {% if request.user.is_authenticated %}
    {% if request.user != user %}
        {% if request.user in user.followers.all %}
        <span id='follow' data-user-id='{{ user.pk }}' class='btn btn-outline-primary mb-2'>팔로우 취소</span>
        {% else %}
        <span id='follow' data-user-id='{{ user.pk }}' class='btn btn-primary mb-2'>팔로우</span>
        {% endif %}
    {% endif %}
    {% endif %}
    <p class="text-center pb-2"><span class="mx-2">게시물 <b>1000</b></span><span class="mx-2">팔로워 <b id='followers'>{{ user.followers.count }}</b></span><span class="mx-2">팔로잉 <b id='followings'>{{ user.followings.count }}</b></span></p>
</div>
{% comment %} <div class='row'> {% endcomment %}
{% comment %} {% for article in articles %}
    <div class='col-6 col-sm-3'>
        <img src="{{ article.image.url }}" alt="{{ article.image }}" class="rounded-4">
        <div class='justify-content-center'>
            <span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-heart-fill" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
            </svg>{{ article.like.count }}</span>
            <span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat" viewBox="0 0 16 16">
                <path d="M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z"/>
            </svg>{{ article.comment.count }}</span>
        </div>
    </div>
{% endfor %} {% endcomment %}
{% comment %} </div> {% endcomment %}
{% endblock %}
{% block script1 %}
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <script>
        const followBtn = document.querySelector('#follow')
        followBtn.addEventListener('click', function(event) {
            axios({
                method: 'get',
                url: `/accounts/follow/${event.target.dataset.userId}/`
            })
            .then(response => {
                if( response.data.is_followed == true) {
                    event.target.classList.remove('btn-primary')
                    event.target.classList.add('btn-outline-primary')
                    followBtn.innerText= '팔로우 취소'
                } else {
                    event.target.classList.remove('btn-outline-primary')
                    event.target.classList.add('btn-primary')
                    followBtn.innerText='팔로우'
                }
                const followers = document.querySelector('#followers')
                const followings = document.querySelector('#followings')
                followers.innerText = response.data.followersC
                followings.innerText = response.data.followingsC
            })
        })
    </script>
{% endblock script1 %}